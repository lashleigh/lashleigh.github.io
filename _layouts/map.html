<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

  {% include head.html %}

  <body>

    {% include header.html %}

    <main class="TODO" aria-label="Content">
      <div id="mapid"></div>
      <script type="text/javascript">
        {% include map.js %}
        {% for book in site.books %}
          {% if book.location.lat and book.location.lng %}

            L.marker([{{book.location.lat}}, {{book.location.lng}}]).addTo(mymap)
		         .bindPopup('<a class="map-book-link" href="{{ book.url | relative_url }}">{{ book.title | escape }}</a>');
		      {% elsif jekyll.environment != 'production' %}
		        L.marker([0,0], {
		        	title: '<a class="map-book-link" href="{{ book.url | relative_url }}">{{ book.title | escape }}</a>'
		          })
		         .bindPopup('<a class="map-book-link" href="{{ book.url | relative_url }}">{{ book.title | escape }}</a>')
		         .addTo(mymap)
		         .on('dragend', function(event) {
                   lastEvent = event;
                   event.target.setPopupContent(event.target.options.title + "</br>" + event.target.getLatLng()).openPopup();
                 })
		         .dragging.enable();	                  
          {% endif %}
        {% endfor %}
    </script>

    </main>

    {% include footer.html %}

  </body>

</html>